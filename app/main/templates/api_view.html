
{% extends 'base.html' %}

{% block content %}
<style>
    .doc-container {
        max-width: 900px;
        margin: 2rem auto;
        font-family: 'Times New Roman', Times, serif;
        color: #333;
        line-height: 1.8;
    }

    .doc-container h1 {
        text-align: center;
        font-size: 2.2rem;
        margin-bottom: 1.5rem;
        color: #2c3e50;
    }

    .doc-container h2 {
        margin-top: 2rem;
        font-size: 1.5rem;
        border-bottom: 2px solid #2980b9;
        display: inline-block;
        padding-bottom: 0.3rem;
        color: #2980b9;
    }

    .doc-container p {
        font-size: 1.1rem;
        margin-bottom: 1rem;
    }

    .code-block {
        background-color: #f4f4f4;
        border: 1px solid #ccc;
        border-radius: 8px;
        position: relative;
        margin-top: 1rem;
        margin-bottom: 1.5rem;
        padding: 1rem;
        font-family: 'Courier New', monospace;
        overflow-x: auto;
    }

    .code-label {
        position: absolute;
        top: 8px;
        left: 10px;
        background-color: #2980b9;
        color: white;
        padding: 2px 8px;
        font-size: 0.8rem;
        border-radius: 4px;
    }

    .copy-btn {
        position: absolute;
        top: 8px;
        right: 10px;
        background-color: #34495e;
        color: white;
        border: none;
        padding: 5px 10px;
        border-radius: 4px;
        cursor: pointer;
        font-size: 0.8rem;
    }

    .copy-btn:hover {
        background-color: #2c3e50;
    }
</style>

<div class="doc-container">
    <h1>API Usage Guide</h1>
    <p>
        Welcome to the <strong>Instant Dictionary API</strong>. This guide will help you integrate our dictionary
        service into your applications. Follow the steps below to authenticate and fetch definitions.
    </p>

    <h2>Authentication</h2>
    <p>
        First, you need to <strong>sign up</strong> and <strong>log in</strong> to get your JWT token.
        Use this token in the <code>Authorization</code> header for all requests.
    </p>

    <div class="code-block">
        <div class="code-label">Python</div>
        <button class="copy-btn" onclick="copyCode('signup-code')">Copy</button>
        <pre id="signup-code">

import requests

BASE_URL = "http://127.0.0.1:5000"

# Sign up
signup_data = {"username": "john", "password": "mypassword"}
response = requests.post(f"{BASE_URL}/auth/signup", json=signup_data)
print(response.json())

# Login
login_data = {"username": "john", "password": "mypassword"}
response = requests.post(f"{BASE_URL}/auth/login", json=login_data)
token = response.json().get("token")
print("JWT Token:", token)
        </pre>
    </div>

    <h2>Fetch Word Definitions</h2>
    <p>
        Once you have the token, send it in the headers along with the word you want to search.
    </p>

    <div class="code-block">
        <div class="code-label">Python</div>
        <button class="copy-btn" onclick="copyCode('fetch-code')">Copy</button>
        <pre id="fetch-code">
            
headers = {"Authorization": token}
data = {"word": "python"}

response = requests.post(f"{BASE_URL}/api/fetch_result", json=data, headers=headers)
print(response.json())
        </pre>
    </div>
</div>

<script>
function copyCode(elementId) {
    const code = document.getElementById(elementId).innerText;
    navigator.clipboard.writeText(code).then(() => {
        alert('Code copied!');
    });
}
</script>
{% endblock %}
